if (document.cookie.indexOf("formInfo") > -1) {
    var formInfoStart = document.cookie.split("formInfo=")[1];
    var formInfoValues = formInfoStart.split("&END")[0];
    document.forms.theForm["first_name"].value = formInfoValues.split("&")[0];
    document.forms.theForm["last_name"].value = formInfoValues.split("&")[1];
    document.forms.theForm["email"].value = formInfoValues.split("&")[2];
    document.forms.theForm["company"].value = formInfoValues.split("&")[3];
    document.forms.theForm["phone"].value = formInfoValues.split("&")[4];
    if (formInfoValues.split("&")[3] ==
        "NA") document.forms.theForm["company"].value = "";
    if (formInfoValues.split("&")[5] != "NA") {
        document.forms.theForm["00NG0000009buns"].value = formInfoValues.split("&")[5];
        $("#00NG0000009buns").addClass("selectfocus")
    }
    if (formInfoValues.split("&")[6] != "NA") {
        document.forms.theForm["00NG0000009cun5"].value = formInfoValues.split("&")[6];
        $("#00NG0000009cun5").addClass("selectfocus")
    }
    if (formInfoValues.split("&")[7] != "NA") {
        document.forms.theForm["00NG0000009bunx"].value = formInfoValues.split("&")[7];
        $("#00NG0000009bunx").addClass("selectfocus")
    }
} else;

function checkForReferrer() {
    var theCookies = document.cookie;
    if (theCookies.indexOf("referralPartner=") > -1) {
        var theCookie1 = theCookies.split("referralPartner=")[1];
        var theReferrer = theCookie1.split(";")[0];
        var elem = document.getElementById("00NG000000Bd5gV");
        elem.value = theReferrer
    } else {
        var theReferrer = "N/A";
        console.log(theReferrer)
    }
}
checkForReferrer();

function setCookies() {
    cookie_name = "formInfo";
    var thefirstname = document.forms.theForm["first_name"].value;
    var thelastname = document.forms.theForm["last_name"].value;
    var theemail = document.forms.theForm["email"].value;
    var thecompany = document.forms.theForm["company"].value;
    var thephone = document.forms.theForm["phone"].value;
    var the00NG0000009buns = document.forms.theForm["00NG0000009buns"].value;
    var the00NG0000009cun5 = document.forms.theForm["00NG0000009cun5"].value;
    var the00NG0000009bunx = document.forms.theForm["00NG0000009bunx"].value;
    var expires = new Date;
    expires.setTime(expires.getTime() + 31536E6);
    document.cookie = cookie_name + "=" + thefirstname + "&" + thelastname + "&" + theemail + "&" + thecompany + "&" + thephone + "&" + the00NG0000009buns + "&" + the00NG0000009cun5 + "&" + the00NG0000009bunx + "&END" + ";expires=" + expires.toUTCString() + ";path=/"
}

function checkTheForm() {
    required = ["first_name", "last_name", "email", "company", "phone", "00NG0000009buns", "00NG0000009cun5", "00NG0000009bunx"];
    email = $("#email");
    $(".error-message, .error-message-left").fadeOut();
    emptyerror = "Please fill out this field.";
    emailerror = "Please enter a valid e-mail.";
    for (i = 0; i < required.length; i++) {
        var input = $("#" + required[i]);
        if (input.val() == "" || (input.val() == "First Name" || (input.val() == "Last Name" || input.val() == "Store Name")) || input.val() == emptyerror) {
            $(input).next().fadeIn();
            $("#form-left").fadeTo("slow", 0.3);
            input.addClass("required")
        } else {
            input.removeClass("required");
            $(input).next().css("display", "none")
        }
    }
    if (!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(email.val())) {
        email.addClass("required");
        $(".error-email").fadeIn()
    }
    if ($(":input").hasClass("required"))
        if (event.preventDefault) event.preventDefault();
        else event.returnValue = false;
    else {
        $("#formsubmitbutton").attr("disabled", "disabled").css("opacity", "0.2");
        setCookies();
        document.forms.theForm.action =
            "https://www.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8";
        document.forms.theForm.submit()
    }
}

function checkTheFormContact() {
    required = ["first_name", "last_name", "email", "phone", "contact-message", "about-contact"];
    email = $("#email");
    $(".error-message, .error-message-left").fadeOut();
    emptyerror = "Please fill out this field.";
    emailerror = "Please enter a valid e-mail.";
    for (i = 0; i < required.length; i++) {
        var input = $("#" + required[i]);
        if (input.val() == "" || (input.val() == "First Name" || (input.val() == "Last Name" || (input.val() == "Store Name" || input.val().indexOf("http") != -1))) || input.val() == emptyerror) {
            $(input).next().fadeIn();
            $("#form-left").fadeTo("slow", 0.3);
            input.addClass("required")
        } else {
            input.removeClass("required");
            $(input).next().css("display", "none");
            $("#formsubmitbutton").removeAttr("disabled", "").css("opacity", "1").html("Send")
        }
    }
    if (!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(email.val())) {
        email.addClass("required");
        $(".error-email").fadeIn()
    }
    if ($(":input").hasClass("required"))
        if (event.preventDefault) event.preventDefault();
        else event.returnValue = false;
    else if (document.forms.theForm["about-contact"].value ==
        "Sales" && document.forms.theForm["required"].value == "") {
        $("#formsubmitbutton").attr("disabled", "disabled").css("opacity", "0.5").html("Sending...");
        setCookies();
        document.forms.theForm["description"].value = "Website Contact Form Message (Sales): \r\n " + document.forms.theForm["contact-message"].value;
        document.forms.theForm.action = "#";
        document.forms.theForm.submit();
        event.preventDefault()
    } else {
        $("#formsubmitbutton").attr("disabled", "disabled").css("opacity","0.5").html("Sending...");
        setCookies();
        $.ajax({
            type: "POST",
            url: "ajax/contact.php",
            data: $("#theForm").serialize(),
            success: function(data) {
                if (data == "sent") location.href = "http://www.nucleuspos.com/contact-thank-you.php";
                if (data == "notsent") alert("There was an error sending your message.")
            }
        });
        event.preventDefault()
    }
}

function checkTheFormReseller() {
    required = ["reseller_name", "reseller_contact_name", "first_name", "last_name", "email", "company", "phone", "00NG0000009buns", "00NG0000009cun5", "00NG0000009bunx", "00NG0000009cSmt"];
    email = $("#email");
    $(".error-message, .error-message-left").fadeOut();
    emptyerror = "Please fill out this field.";
    emailerror = "Please enter a valid e-mail.";
    for (i = 0; i < required.length; i++) {
        var input = $("#" + required[i]);
        if (input.val() == "" || (input.val() == "First Name" || (input.val() == "Last Name" || input.val() ==
                "Store Name")) || input.val() == emptyerror) {
            $(input).next().fadeIn();
            $("#form-left").fadeTo("slow", 0.3);
            input.addClass("required")
        } else {
            input.removeClass("required");
            $(input).next().css("display", "none")
        }
    }
    if (!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(email.val())) {
        email.addClass("required");
        $(".error-email").fadeIn()
    }
    if ($(":input").hasClass("required")) event.preventDefault();
    else {
        document.forms.theForm["description"].value = "Reseller Name: " + document.forms.theForm["reseller_name"].value +
            " |  Reseller Contact Name: " + document.forms.theForm["reseller_contact_name"].value;
        $("#formsubmitbutton").attr("disabled", "disabled").css("opacity", "0.2");
        setCookies()
    }
}
$("#webinarsubmitbutton").click(function() {
    required = ["select-webinar", "first_name", "last_name", "email", "company", "phone", "00NG0000009buns", "00NG0000009cun5", "00NG0000009bunx"];
    email = $("#email");
    $(".error-message, .error-message-left").fadeOut();
    emptyerror = "Please fill out this field.";
    emailerror = "Please enter a valid e-mail.";
    for (i = 0; i < required.length; i++) {
        var input = $("#" + required[i]);
        if (input.val() == "" || (input.val() == "First Name" || (input.val() == "Last Name" || input.val() == "Store Name")) || input.val() ==
            emptyerror) {
            $(input).next().fadeIn();
            $("#form-left").fadeTo("slow", 0.3);
            input.addClass("required")
        } else {
            input.removeClass("required");
            $(input).next().css("display", "none")
        }
    }
    if (!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(email.val())) {
        email.addClass("required");
        $(".error-email").fadeIn()
    }
    if ($(":input").hasClass("required"))
        if (event.preventDefault) event.preventDefault();
        else event.returnValue = false;
    else {
        $("#formsubmitbutton").attr("disabled", "disabled").css("opacity", "0.5").html("Sending...");
        theWebinar = window.location.href.split("?product=")[1];
        if (theWebinar === undefined) theWebinar = "Cloud";
        var url = "/wp-content/themes/Nucleus/includes/ajax-webinar.php";
        $.ajax({
            type: "POST",
            url: url,
            dataType: "json",
            data: $("#theForm").serialize(),
            success: function(data) {
                if (data["success"]) {
                    setCookies();
                    $("#theForm").submit();
                    console.log("sucess");
                    document.forms.theForm.action = "/contact-thank-you/?form=signup_webinar_" + theWebinar;
                    document.forms.theForm.submit()
                } else {
                    alert("There was an error with your submission.");
                    setCookies();
                    console.log("error (else");
                    document.forms.theForm.action = "/contact-thank-you/?form=signup_webinar_" + theWebinar;
                    document.forms.theForm.submit();
                    $("#theForm").submit()
                }
            },
            error: function(data) {
                alert("There was an error with your submission.");
                setCookies();
                console.log("error");
                document.forms.theForm.action = "/contact-thank-you/?form=signup_webinar_" + theWebinar;
                document.forms.theForm.submit();
                $("#theForm").submit()
            }
        });
        return false
    }
});
$(document).ready(function() {
    $("#00NG0000009buns, #00NG0000009cun5, #00NG0000009bunx, #00NG0000009cSmt, #about-contact").focus(function() {
        $(this).addClass("selectfocus")
    });
    $(":input").focus(function() {
        if ($(this).hasClass("required")) {
            $(this).val("");
            $(this).removeClass("required");
            $(this).next().css("display", "none")
        }
    });
    $(document).mouseup(function(e) {
        var container = $(".demo-form");
        if (container.has(e.target).length === 0) {
            $(".error-email, .error-message, .error-message-left").fadeOut();
            $("#form-left").fadeTo("fast",
                1)
        }
    })
});